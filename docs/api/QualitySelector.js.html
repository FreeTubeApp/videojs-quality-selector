<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: QualitySelector.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: QualitySelector.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import CustomEvents from '../events.js';
import QualityOption from './QualityOption.js';
import videojs from 'video.js';
const QualityChangeClass = 'vjs-quality-changing';
const MenuButton = videojs.getComponent('MenuButton');


/**
 * A component for changing video resolutions
 * @class QualitySelector
 * @augments videojs.Button
 */
class QualitySelector extends MenuButton {

  /**
   * @inheritdoc
   */
  constructor(player, options) {
      super(player, options);

      // Update interface instantly so the user's change is acknowledged
      player.on(CustomEvents.QUALITY_REQUESTED, function(event, newSource) {
        this.setSelectedSource(newSource);
        player.addClass(QualityChangeClass);

        player.one('loadeddata', function() {
            player.removeClass(QualityChangeClass);
        });
      }.bind(this));

      // Update the list of menu items only when the list of sources change
      player.on(CustomEvents.PLAYER_SOURCES_CHANGED, function() {
        this.update();
      }.bind(this));

      player.on(CustomEvents.QUALITY_SELECTED, function(event, newSource) {
        // Update the selected source with the source that was actually selected
        this.setSelectedSource(newSource);
      }.bind(this));

      // Since it's possible for the player to get a source before the selector is
      // created, make sure to update once we get a "ready" signal.
      player.one('ready', function() {
        this.selectedSrc = player.src();
        this.update();
      }.bind(this));

      this.controlText('Open quality selector menu');
  }

  /**
   * Updates the source that is selected in the menu
   * @param {object} source player source to display as selected
   */
  setSelectedSource(source) {
      var source_ = (source ? source.src : undefined);

      if (this.selectedSrc !== source_) {
        this.selectedSrc = source_;
        for (const item of this.items) {
          item.selected(item.source.src === source_);
        }
      }
  }

  /**
   * @inheritdoc
   */
  createItems() {
      var player = this.player(),
          sources = player.currentSources();

      if (!sources || sources.length &lt; 2) {
        return [];
      }

      return sources.map(function(source) {
        return new QualityOption(player, {
            source: source,
            selected: source.src === this.selectedSrc,
        });
      }.bind(this));
  }

  /**
   * @inheritdoc
   */
  buildWrapperCSSClass() {
      return 'vjs-quality-selector ' + super.buildWrapperCSSClass();
  }
}

videojs.registerComponent('QualitySelector', QualitySelector);
export default QualitySelector
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="QualityOption.html">QualityOption</a></li><li><a href="QualitySelector.html">QualitySelector</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue May 02 2023 12:32:55 GMT-0400 (Eastern Daylight Saving Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
